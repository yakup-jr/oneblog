databaseChangeLog:
  - changeSet:
      id: create-table-paragraph
      author: yakup_jr
      changes:
        - createTable:
            tableName: t_paragraph
            columns:
              - column:
                  name: paragraph_id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    nullable: false
                    unique: true
                    primaryKey: true
                    primaryKeyName: pk_paragraph
              - column:
                  name: text
                  type: VARCHAR(65535)
                  constraints:
                    nullable: true
                    unique: false
  - changeSet:
      id: create-table-label
      author: yakup_jr
      changes:
        - createTable:
            tableName: t_label
            columns:
              - column:
                  name: label_id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    nullable: false
                    unique: true
                    primaryKey: true
                    primaryKeyName: pk_label
              - column:
                  name: name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
                    unique: true
  - changeSet:
      id: create-table-article
      author: yakup_jr
      changes:
        - createTable:
            tableName: t_article
            columns:
              - column:
                  name: article_id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    nullable: false
                    unique: true
                    primaryKey: true
                    primaryKeyName: pk_article
              - column:
                  name: title
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
                    unique: false
              - column:
                  name: created_at
                  type: DATETIME
                  constraints:
                    nullable: false
                    unique: false
  - changeSet:
      id: create-table-article_preview
      author: yakup_jr
      changes:
        - createTable:
            tableName: t_article_preview
            columns:
              - column:
                  name: article_preview_id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    nullable: false
                    unique: true
                    primaryKey: true
                    primaryKeyName: pk_article_preview
  - changeSet:
      id: fk-t_article
      author: yakup_jr
      changes:
        - addColumn:
            tableName: t_article
            columns:
              - column:
                  name: article_preview_id
                  type: int
                  constraints:
                    foreignKeyName: fk_article_article_preview
                    references: t_article_preview(article_preview_id)
                    deleteCascade: true
              - column:
                  name: user_id
                  type: int
                  constraints:
                    foreignKeyName: fk_article_user
                    references: t_user(user_id)
  - changeSet:
      id: create-table-t_article_label
      author: yakup_jr
      changes:
        - createTable:
            tableName: t_article_label
            columns:
              - column:
                  name: article_id
                  type: int
                  constraints:
                    unique: false
                    foreignKeyName: fk_article_label
                    references: t_article(article_id)
                    deleteCascade: true
              - column:
                  name: label_id
                  type: int
                  constraints:
                    unique: false
                    foreignKeyName: fk_label_article
                    references: t_label(label_id)
                    deleteCascade: true
  - changeSet:
      id: fk-t_paragraph
      author: yakup_jr
      changes:
        - addColumn:
            tableName: t_paragraph
            columns:
              - column:
                  name: article_id
                  type: int
                  constraints:
                    nullable: true
                    unique: false
                    foreignKeyName: fk_article_paragraph
                    references: t_article(article_id)
                    deleteCascade: true
              - column:
                  name: article_preview_id
                  type: int
                  constraints:
                    nullable: true
                    unique: false
                    foreignKeyName: fk_article_preview_paragraph
                    references: t_article_preview(article_preview_id)
                    deleteCascade: true
  - changeSet:
      id: create-table-t_article_paragraph
      author: yakup_jr
      changes:
        - createTable:
            tableName: t_article_paragraph
            columns:
              - column:
                  name: article_id
                  type: int
                  constraints:
                    unique: false
                    foreignKeyName: fk_article_paragraph
                    references: t_article(article_id)
                    deleteCascade: true
              - column:
                  name: paragraph_id
                  type: int
                  constraints:
                    unique: false
                    foreignKeyName: fk_paragraph_article
                    references: t_paragraph(paragraph_id)
                    deleteCascade: true
  - changeSet:
      id: fk-t_article_preview
      author: yakup_jr
      changes:
        - addColumn:
            tableName: t_article_preview
            columns:
              - column:
                  name: paragraph_id
                  type: int
                  constraints:
                    nullable: false
                    unique: false
                    foreignKeyName: fk_article_preview_paragraph
                    references: t_paragraph(paragraph_id)
                    deleteCascade: true
              - column:
                  name: article_id
                  type: int
                  constraints:
                    nullable: false
                    unique: true
                    foreignKeyName: fk_article_preview_article
                    references: t_article(article_id)